(window.webpackJsonp=window.webpackJsonp||[]).push([[259],{822:function(t,s,n){"use strict";n.r(s);var a=n(11),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("é€šå¸¸æˆ‘ä»¬ä½¿ç”¨Jenkinså®Œæˆäº†é¡¹ç›®ä¸Šçº¿æ•´ä¸ªCICDçš„æµç¨‹ï¼Œè¿™æ˜¯åº”å¯¹é«˜é€Ÿå‘å±•çš„ä¸šåŠ¡çš„æ–¹æ¡ˆï¼Œéšç€ä¸šåŠ¡è¿›ç¨‹çš„å‘å±•ï¼Œä¸€å®šä¼šåˆ°ä¸€ä¸ªä»¥ç¨³å®šä¸ºç¬¬ä¸€è¦åŠ¡çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¿éšœé«˜è´¨é‡çš„ä»£ç ä¸Šçº¿æ˜¯å…¶æ ¸å¿ƒï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ç€æ‰‹é’ˆå¯¹ä»£ç æ£€æµ‹åšä¸€äº›å·¥ä½œã€‚")]),t._v(" "),n("p",[t._v("è¿™äº›å·¥ä½œï¼Œå¯ä»¥é€šè¿‡ä¸Gitlabç»“åˆçš„é™æ€ciæ£€æµ‹æ¥è¿›è¡Œï¼Œå¾ˆå¤šåœ°æ–¹ä»‹ç»çš„éƒ½æ˜¯åŸºäºgitlab-ciæˆ–è€…å…¶ä»–è¯¸å¦‚droneä¹‹ç±»çš„å·¥å…·æ¥è¿›è¡Œï¼Œæˆ‘è¿™é‡Œåˆ™ç»“åˆJenkinsæ¥è¿›è¡Œåˆ†æã€‚å› ä¸ºåœ¨æˆ‘çš„æ¦‚å¿µä¸­ï¼Œä¸€ç›´è§‰å¾—gitlabå¥½å¥½åšä¸€ä¸ªä»£ç ç®¡ç†å·¥å…·å°±å¯ä»¥äº†ï¼Œä¸å¿…å¼•å…¥è¿‡å¤šå¤–éƒ¨ä¾èµ–ï¼Œä»è€Œç»™ä»£ç ç®¡ç†æœ¬èº«å¸¦æ¥ä¸ç¨³å®šå› ç´ ã€‚")]),t._v(" "),n("p",[t._v("ä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘è¿™é‡Œä»¥ä¸€ä¸ªNGINXé…ç½®æ–‡ä»¶é›†æˆçš„åœºæ™¯æ¥è¿›è¡Œè®²è§£ã€‚")]),t._v(" "),n("p",[t._v("ä¸€äº›ç°å®æ•™è®­å‘Šè¯‰æˆ‘ä»¬ï¼Œå¾ˆå¤šæ—¶å€™çš„æ•…éšœæˆ–è€…å¼‚å¸¸è¶…80%éƒ½æ˜¯å› ä¸º"),n("code",[t._v("å˜æ›´")]),t._v("å¼•èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ‰€æœ‰NGINXçš„é…ç½®æ”¶å½’åˆ°gitlabè¿›è¡Œç®¡ç†ï¼Œå¦‚æœè¦è°ƒæ•´å°±èµ°ä»£ç ä¸Šçº¿çš„æµç¨‹ï¼Œå‡å°‘ç›´æ¥ä¸Šæœºæ“ä½œçš„æ¬¡æ•°ã€‚")]),t._v(" "),n("p",[t._v("æ¥ä¸‹æ¥å±•ç¤ºæ•´ä¸ªé…ç½®æµç¨‹ï¼Œä¸»è¦åˆ†äº«æ€è·¯ï¼Œå…·ä½“é™æ€æ£€æŸ¥é€»è¾‘æ ¹æ®éœ€æ±‚å¯è¿›è¡Œè°ƒæ•´ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_1-gitlabé…ç½®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-gitlabé…ç½®"}},[t._v("#")]),t._v(" 1ï¼Œgitlabé…ç½®")]),t._v(" "),n("p",[t._v("gitlabé…ç½®çš„æ ¸å¿ƒåœ¨äºï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ§åˆ¶ä¸€äº›æŒ‡å®šåˆ†æ”¯çš„æƒé™ï¼Œæ¯”å¦‚æ§åˆ¶masteråˆ†æ”¯ä¸èƒ½ç›´æ¥pushï¼Œä¸”ä»…æœ‰"),n("code",[t._v("Maintainers")]),t._v("æƒé™çš„äººèƒ½å¤Ÿmergeï¼Œé…ç½®ä½ç½®ï¼šè¿›å…¥"),n("code",[t._v("é¡¹ç›®")]),t._v("---\x3e"),n("code",[t._v("Settings")]),t._v("---\x3e"),n("code",[t._v("Repository")]),t._v("---\x3e"),n("code",[t._v("Protected Branches")]),t._v(":")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/a3c8202caf9a7d3d.jpg",alt:"image-20210822162832429"}})]),t._v(" "),n("p",[t._v("è¿™æ ·æˆ‘ä»¬åªæŠŠéƒ¨åˆ†leaderèµ‹äºˆ"),n("code",[t._v("Maintainers")]),t._v("æƒé™ï¼Œå³å¯æ§åˆ¶åˆ°ä»£ç çš„ä¸Šçº¿ï¼Œå¿…é¡»ç»è¿‡è¿™å‡ ä¸ªå¤§ä½¬çš„æ‰‹æ‰è¡Œã€‚")]),t._v(" "),n("p",[n("code",[t._v("æ³¨æ„ï¼š")]),t._v("å¦‚æœåœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œè¿™é‡Œè¦æ§åˆ¶çš„åˆ†æ”¯ï¼Œä¹Ÿè®¸masteræœªå¿…åˆé€‚ï¼Œå› ä¸ºmasterå¸¸å¸¸åº”å¯¹ç€æ­£å¼ç¯å¢ƒåœ°å‘å¸ƒï¼Œè®²ç©¶ç¨³å®šçš„åŒæ—¶ä¹Ÿè€ƒè™‘ä¸€äº›ç´§æ€¥åœºæ™¯çš„æ•ˆç‡ï¼Œå› æ­¤ï¼Œå®é™…ç”Ÿäº§ä¸­ï¼Œæˆ–è®¸è¿™é‡Œæ§åˆ¶ä½é¢„å‘ç¯å¢ƒçš„preåˆ†æ”¯ä¼šæ›´åˆé€‚ï¼")]),t._v(" "),n("p",[t._v("æ¥ç€æˆ‘ä»¬è¦å‹¾é€‰ä¸€ä¸ªç›¸å½“é‡è¦çš„é…ç½®é¡¹ï¼Œ"),n("code",[t._v("only allow merge requests to be merged if the pipeline succeeds")]),t._v("ï¼Œé…ç½®ä½ç½®ï¼šè¿›å…¥"),n("code",[t._v("é¡¹ç›®")]),t._v("---\x3e"),n("code",[t._v("Settings")]),t._v("---\x3e"),n("code",[t._v("General")]),t._v("---\x3e"),n("code",[t._v("Merge request settings")]),t._v(":")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/9888088997568c9c.jpg",alt:"image-20210822163504049"}})]),t._v(" "),n("p",[t._v("æ­¤é…ç½®é¡¹å†³å®šäº†ä»…å½“æµæ°´çº¿æˆåŠŸæ—¶æ‰èƒ½å¤Ÿè¿›è¡Œmergeï¼Œå¦åˆ™mergeæŒ‰é’®å°†ä¼šæ˜¯ç°è‰²çš„ï¼Œä½¿å¾—"),n("code",[t._v("Maintainers")]),t._v("æ— æ³•è¿›è¡Œä»£ç åˆå¹¶ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_2-jenkinsé…ç½®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-jenkinsé…ç½®"}},[t._v("#")]),t._v(" 2ï¼ŒJenkinsé…ç½®")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬åˆ›å»ºå¦‚ä¸‹æµæ°´çº¿ä½œä¸ºå½“å‰é¡¹ç›®çš„cié…ç½®ï¼š")]),t._v(" "),n("div",{staticClass:"language-groovy line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("pipeline "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    agent "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        label "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"slave_test_go"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    environment "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡åç§°")]),t._v("\n        SERVICE_NAME"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("JOB_BASE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),t._v("\n        MODE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"DEPLOY"')]),t._v("\n        REASON"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"æ— "')]),t._v("\n        REMOTE_HOST"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"å ä½"')]),t._v("\n        _VERSION"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"æµ‹è¯•éªŒè¯"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸»é¡¹ç›®åœ°å€")]),t._v("\n        GIT_URL "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"https://gitlab.test.com/ops/openrestyConfig.git"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    parameters "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BRANCH'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defaultValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯·è¾“å…¥å°†è¦æ„å»ºçš„ä»£ç åˆ†æ”¯'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    options "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timestamps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡ºæ„å»ºæ—¥å¿—æ‰“å°æ—¶é—´ä¿¡æ¯")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MINUTES'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®æ„å»ºè¶…æ—¶æ—¶é—´")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildDiscarder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("logRotator")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("numToKeepStr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'15'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å†å²æ„å»ºä¿ç•™æ¬¡æ•°")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("gitLabConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gitlab-token'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ“ä½œgitlabçš„token")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    triggers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("gitlab")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("triggerOnPush"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("triggerOnMergeRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("branchFilterType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'All'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("secretToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GIT_TOKEN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¢„ç•™Gitlabæäº¤è‡ªåŠ¨æ„å»º")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stages "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç½®ä¸ºpending'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        updateGitlabCommitStatus name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pending'")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"ç½®ä¸ºpendingå‡ºé”™"')]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ‹‰å–ä»£ç '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CAUSE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentBuild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBuildCauses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CAUSE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'null'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BRANCH "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'echo ${gitlabBranch}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" doGenerateSubmoduleConfigurations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" submoduleCfg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" extensions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CloneOption'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" depth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" noTags"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reference"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" shallow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            branches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("BRANCH")]),t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("userRemoteConfigs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GIT_URL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" credentialsId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"cicd-pass"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰å…¨å±€å˜é‡")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_ID   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%h'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤ID")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_USER "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%an'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" returnStdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤è€…")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_TIME "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%ai'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" returnStdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤æ—¶é—´")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMIT_INFO "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git log --pretty=format:%s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  returnStdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æäº¤ä¿¡æ¯")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"æ‹‰å–ä»£ç å‡ºé”™"')]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ£€æµ‹é¡¹ç›®'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reg.test.com/base/openresty:1.19.3.2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("inside")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('" -v /etc/hosts:/etc/hosts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            sh "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'''nginx -c $WORKSPACE/nginx.conf -t'''")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REASON "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"æ£€æµ‹é¡¹ç›®å‡ºé”™"')]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    post "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        success "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateGitlabCommitStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            addGitLabMRComment comment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"ğŸ¤–Jenkins ci check successğŸ¥³, see the log: '),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BUILD_URL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('console"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        failure "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateGitlabCommitStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            addGitLabMRComment comment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"ğŸ¤–Jenkins ci check failedğŸ¤¯, see the log: '),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BUILD_URL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('console"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br")])]),n("p",[t._v("è¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("gitLabConnection")]),t._v("ï¼šè¦åœ¨ç³»ç»Ÿç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªå¯æ“ä½œgitlabçš„tokenï¼Œéå¸¸é‡è¦ï¼Œå¦‚æœæ²¡æœ‰æ­¤é¡¹é…ç½®ï¼Œåˆ™æµæ°´çº¿æ— æ³•å°†çŠ¶æ€å›è°ƒç»™gitlabé¡¹ç›®ã€‚")]),t._v(" "),n("p",[t._v("é…ç½®ä½ç½®ï¼š"),n("code",[t._v("ç³»ç»Ÿç®¡ç†")]),t._v("---\x3e"),n("code",[t._v("ç³»ç»Ÿé…ç½®")]),t._v("---\x3e"),n("code",[t._v("Gitlab")]),t._v(":")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/3770bf89a888a130.jpg",alt:"image-20210822164215918"}})])]),t._v(" "),n("li",[n("p",[t._v("è¿™é‡Œé™åˆ¶äº†triggersæ¡ä»¶ä»…ä¸ºmergeæ—¶è§¦å‘ï¼Œå½“å‰è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚é™åˆ¶å›ºå®šåˆ†æ”¯ï¼Œä»è€Œå°†ciæ£€æµ‹æ§åˆ¶åœ¨æŒ‡å®šçš„èŒƒå›´é‡Œã€‚")])]),t._v(" "),n("li",[n("p",[t._v("è§¦å‘æ„å»ºä¹‹å‰ï¼Œé¦–å…ˆå°†çŠ¶æ€ç½®ä¸ºpenndingï¼Œä»è€Œè®©gitlabé¡¹ç›®æ— æ³•mergeã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æ‹‰å®Œä»£ç ä¹‹åï¼Œæˆ‘ä»¬å€ŸåŠ©é›†æˆå¥½çš„é•œåƒå¯¹NGINXé…ç½®æ–‡ä»¶è¿›è¡Œè¯­æ³•æ£€æµ‹ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("ç„¶ååœ¨æœ€åå€ŸåŠ©æµæ°´çº¿çš„postèƒ½åŠ›ï¼Œå°†ä¸åŒçš„çŠ¶æ€å›è°ƒç»™gitlabã€‚")])])]),t._v(" "),n("p",[t._v("å…³äºå¦‚ä½•é…ç½®è‡ªåŠ¨è§¦å‘çš„æµæ°´çº¿ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œå¯ä»¥å‚è€ƒï¼š"),n("a",{attrs:{href:"https://wiki.eryajf.net/pages/3304.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡ªåŠ¨æ„å»ºçš„åŸå§‹é…ç½®ä»¥åŠpipelineä¸­çš„ç”¨æ³•"),n("OutboundLink")],1),t._v("ã€‚åªä¸è¿‡åœ¨gitlabæ·»åŠ hookçš„æ—¶å€™ä»…é…ç½®merge eventå³å¯ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_3-éªŒè¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-éªŒè¯"}},[t._v("#")]),t._v(" 3ï¼ŒéªŒè¯")]),t._v(" "),n("p",[t._v("è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥èµ°æ­£å¸¸å¼€å‘æµç¨‹ï¼Œæ–°éœ€æ±‚ä»masteråˆ‡å‡ºæ¥ä¸€ä¸ªç‹¬ç«‹çš„åˆ†æ”¯ï¼Œè°ƒæ•´å®Œæˆä¹‹åï¼Œæäº¤è‡ªå·±çš„æ™®é€šåˆ†æ”¯ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªmerge requestï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/2cbddb5eb14d97ad.jpg",alt:"image-20210822165603446"}})]),t._v(" "),n("p",[t._v("æ³¨æ„ï¼Œæ­¤æ—¶mergeæŒ‰é’®ä»æ—§æ˜¯ç»¿è‰²çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œåªæœ‰å½“æµæ°´çº¿å¼€å§‹è§¦å‘ï¼Œå°†çŠ¶æ€ç½®ä¸ºpenndingæ—¶æ‰ä¼šè½¬å˜ï¼Œå¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„åŠæ³•æ§åˆ¶è¿™ä¸ªæŒ‰é’®ï¼Œæ¬¢è¿ç•™è¨€äº¤æµã€‚")]),t._v(" "),n("p",[t._v("æ¥ç€å°±ä¼šè‡ªåŠ¨è§¦å‘æµæ°´çº¿è¿›è¡Œé™æ€æ£€æµ‹ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™ä¼šæœ‰å¦‚ä¸‹æ˜¾ç¤ºï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/d8e800c9af66d854.jpg",alt:"image-20210822165933221"}})]),t._v(" "),n("p",[t._v("æ­¤æ—¶éœ€è¦è¿›è¡Œmergeçš„åŒå­¦å…¶å®ä¸å¿…å†çº ç»“æäº¤é…ç½®æ–‡ä»¶çš„è¯­æ³•æ˜¯å¦æœ‰é—®é¢˜ï¼Œåªéœ€è¦Reviewä¸‹Changesçš„å†…å®¹å³å¯å†³å®šæ˜¯å¦mergeã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœå¤±è´¥ï¼Œåˆ™çŠ¶æ€å¦‚ä¸‹ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/1ee8805ae9e7d002.jpg",alt:"image-20210822171048655"}})]),t._v(" "),n("p",[t._v("æ³¨æ„ï¼Œå½“æµæ°´çº¿æ£€æµ‹å¤±è´¥ä¹‹åï¼Œgitlabçš„mergeçŠ¶æ€ä¹Ÿä¼šå˜æˆç°è‰²æ— æ³•mergeï¼Œå¹¶æç¤ºï¼š"),n("code",[t._v("The pipeline for this merge request failed. Please retry the job or push a new commit to fix the failure")]),t._v("ï¼Œé‚£ä¹ˆå¯¹åº”çš„å¼€å‘åŒå­¦å°±éœ€è¦è§£å†³æ‰å¯¹åº”çš„å†²çªæˆ–è€…é—®é¢˜ä¹‹åæ–¹å¯å†æ¬¡æäº¤mergeï¼Œè‡ªå·±çš„ä»£ç æ‰èƒ½å¤Ÿé€šè¿‡è¿™é“å…³å¡è€Œä¸Šçº¿ã€‚")]),t._v(" "),n("p",[t._v("å…¶ä»–èµ„æ–™ï¼š")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/jenkinsci/gitlab-plugin/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkinsæ’ä»¶gitlab-pluginçš„å®˜æ–¹æ–‡æ¡£"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);
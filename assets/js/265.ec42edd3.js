(window.webpackJsonp=window.webpackJsonp||[]).push([[265],{829:function(s,t,a){"use strict";a.r(t);var n=a(11),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("现在有好几台主机的nginx日志想要监控分析一下，那么，如何让远程主机的日志都乖乖的来到elk主机之上呢，这是一个需要考虑的问题，而这里，我就使用rsyslog来完成。")]),s._v(" "),a("p",[s._v("这种方式貌似针对于远程主机上只有单项日志的情况，就像我们现在做的，只处理nginx的访问日志一般的，如果还有更多的日志需要从远程转发到elk集群中，就需要用其他方式了，或者说我只会配置这么一种，更复杂的，目前还玩不转。后来哈，在当我测试rsyslog转发多个日志的时候，发现，里边配置规则过于复杂，分类方面也非常不给力，就此打住，一旦多个日志，直接用filebeat即可。")]),s._v(" "),a("p",[s._v("现在，废话不多说，直接进入正题。")]),s._v(" "),a("p",[s._v("目前的思路，可以通过下图了解：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1gQXGaQL0gK0jSZFt760QCXXaF.png",alt:"img"}})]),s._v(" "),a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[s._v("图中举例了两台nginx，其实可以有更多台nginx日志可以想后方转发。")]),s._v(" "),a("li",[s._v("双方以rsyslog作为桥梁，从而实现日志的中转运输。其中nginx主机上是发送端，elk主机上是接收端。")]),s._v(" "),a("li",[s._v("针对不同的nginx日志，可以启动不同的logstash实例，然后将日志转发给es。")]),s._v(" "),a("li",[s._v("由es，统一将日志转给kibana。")])]),s._v(" "),a("p",[s._v("基本上配置起来也就是按上边的思路走，一步步配置起来就好了。")]),s._v(" "),a("p",[s._v("主机情况：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("主机")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("组件")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("172.16.37.157")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Nginx，Rsyslog")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("10.100.120.82")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Rsyslog，ELK")])])])]),s._v(" "),a("h2",{attrs:{id:"_1-nginx日志json化。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nginx日志json化。"}},[s._v("#")]),s._v(" 1，nginx日志json化。")]),s._v(" "),a("p",[s._v("首先来配置nginx端的日志，为了方便后边一系列的操作，需要先把nginx的日志json化，要配置也非常简单，通过编辑nginx的配置文件来实现：")]),s._v(" "),a("p",[s._v("在nginx的配置文件nginx.conf的http区域添加如下内容：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("log_format json '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$time_iso8601"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$server_addr"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request_method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$request_method"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" '\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clientip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$remote_addr"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$body_bytes_sent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"responsetime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$request_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"upstreamtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$upstream_response_time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"upstreamhost"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$upstream_addr"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"http_host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$host"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$uri"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"xff"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$http_x_forwarded_for"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"referer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$http_referer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"agent"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$http_user_agent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'\n                 '"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$status"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("注意，这个地方的配置，其实是非常重要的，里边定义了许多的字段（可能还不明白字段是什么意思，等到后边会慢慢介绍这个东东），这些字段取自于原nginx日志，然后再转给es，最后通过kibana展示出来，从而让分析更加多维，立体，简单说明一下这些参数：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("timestamp")]),s._v("：日志的时间戳。")]),s._v(" "),a("li",[a("code",[s._v("host")]),s._v("：nginx所在主机IP。")]),s._v(" "),a("li",[a("code",[s._v("request_method")]),s._v("：请求类型（POST，GET）")]),s._v(" "),a("li",[a("code",[s._v("clientip")]),s._v("：前端ip。")]),s._v(" "),a("li",[a("code",[s._v("size")]),s._v("：请求大小。")]),s._v(" "),a("li",[a("code",[s._v("responsetime")]),s._v("：请求响应时间。")]),s._v(" "),a("li",[a("code",[s._v("upstreamtime")]),s._v("：后端相应请求时间。")]),s._v(" "),a("li",[a("code",[s._v("upstreamhost")]),s._v("：后端服务器IP。")]),s._v(" "),a("li",[a("code",[s._v("http_host")]),s._v("：域名。")]),s._v(" "),a("li",[a("code",[s._v("url")]),s._v("：请求的接口。")]),s._v(" "),a("li",[a("code",[s._v("xff")]),s._v("：用户IP。")]),s._v(" "),a("li",[a("code",[s._v("referer")]),s._v("：完整请求地址。")]),s._v(" "),a("li",[a("code",[s._v("agent")]),s._v("：客户端类型。")]),s._v(" "),a("li",[a("code",[s._v("status")]),s._v("：状态码。")])]),s._v(" "),a("p",[s._v("其中的"),a("code",[s._v("clientip")]),s._v("常规情况下就是指请求的来源IP地址，下边的"),a("code",[s._v("xff")]),s._v("也是，原因是我们的环境当中在nginx节点之前，还有一层waf，所以此时代表请求的来源IP地址的，则是"),a("code",[s._v("xff")]),s._v("，这个字段用意，将会在后边说明。")]),s._v(" "),a("p",[s._v("然后在nginx的访问日志配置access_log处更改配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("access_log /var/log/nginx/access.log json;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此处的json是与上边的"),a("code",[s._v("log_format")]),s._v("后边的名称相对应的，保持一致即可。如果有多台，可以将如上配置配置过去，这里我就不一一列举了，就拿这台nginx作为示例了。下边也一样，不再配置多台。")]),s._v(" "),a("h2",{attrs:{id:"_2-发送端配置。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-发送端配置。"}},[s._v("#")]),s._v(" 2，发送端配置。")]),s._v(" "),a("p",[s._v("现在开始编辑rsyslog发送端的配置，直接编辑rsyslog的配置文件，这里以其中一台服务器的nginx日志作为示例，通过rsyslog将nginx的访问日志转发到elk主机上去。")]),s._v(" "),a("p",[s._v("说明有二：")]),s._v(" "),a("ul",[a("li",[s._v("默认我这里使用的是CentOS7的主机，已经安装了rsyslog-8.x的服务。")]),s._v(" "),a("li",[s._v("还有主机是CentOS-6.x的，可能rsyslog版本很低，这个解决非常简单，通过如下两条命令安装即可。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://rpms.adiscon.com/v8-stable/rsyslog.repo -O /etc/yum.repos.d/rsyslog.repo\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" rsyslog\nrsyslogd -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("接下来列出配置内容：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost curl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$egrep")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^#|^$"')]),s._v(" /etc/rsyslog.conf\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" imfile\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFilePollInterval")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WorkDirectory")]),s._v(" /var/spool/rsyslog\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PrivDropToGroup")]),s._v(" adm\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFileName")]),s._v(" /var/log/nginx/access.log\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFileTag")]),s._v(" nginx-access:\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFileStateFile")]),s._v(" stat-nginx-access\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFileSeverity")]),s._v(" info\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputFilePersistStateInterval")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputRunFileMonitor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$template")]),s._v(" BiglogFormatNginx,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%msg%'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$programname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-access'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" @10.100.120.82:514"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("BiglogFormatNginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("InputFileName")]),s._v("：定义日志文件位置，此处貌似不能使用*.log来匹配。")]),s._v(" "),a("li",[a("code",[s._v("InputFileTag")]),s._v("：定义一个tag，方便下边调用。")]),s._v(" "),a("li",[a("code",[s._v("template")]),s._v("：定义日志格式的模板。")]),s._v(" "),a("li",[a("code",[s._v("最后一句")]),s._v("：将日志转发给"),a("code",[s._v("10.100.120.82")]),s._v("的"),a("code",[s._v("UDP")]),s._v("（一个@表示UDP，两个@表示TCP）端口"),a("code",[s._v("514")]),s._v("，并应用模板"),a("code",[s._v("BiglogFormatNginx")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"_3-接收端配置。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-接收端配置。"}},[s._v("#")]),s._v(" 3，接收端配置。")]),s._v(" "),a("p",[s._v("接收端在elk主机之上，这里同样配置rsyslog作为接收端，然后将接收到的日志存在elk本地。配置内容如下：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$egrep")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^#|^$"')]),s._v(" /etc/rsyslog.conf\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$template")]),s._v(" myformat,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%rawmsg%'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ActionFileDefaultTemplate")]),s._v(" myformat\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" imuxsock "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# provides support for local system logging (e.g. via logger command)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" imjournal "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# provides access to the systemd journal")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" immark  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# provides --MARK-- message capability")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" imudp\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$UDPServerRun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("514")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ModLoad")]),s._v(" imtcp\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$InputTCPServerRun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("514")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WorkDirectory")]),s._v(" /var/lib/rsyslog\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$AllowedSender")]),s._v(" tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".120.0/24,172.16.37.0/24\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$template")]),s._v(" Remote,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/logs/logstashfile/%fromhost-ip%/%fromhost-ip%_%'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$YEAR")]),s._v("%-%"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MONTH")]),s._v("%-%"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DAY")]),s._v('%.log"')]),s._v("\n:fromhost-ip, "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("isequal, "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v(" ?Remote\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$IncludeConfig")]),s._v(" /etc/rsyslog.d/*.conf\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OmitLocalLogging")]),s._v(" on\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$IMJournalStateFile")]),s._v(" imjournal.state\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[s._v("1，在本机开启upd,tcp端口514接收日志。")]),s._v(" "),a("li",[s._v("2，接收的范围，是IP定义的，多个网段的话中间用逗号隔开。")]),s._v(" "),a("li",[s._v("3，接收到的日志存放模板，存在本地的/logs目录下，这里注意需要创建对应目录。")]),s._v(" "),a("li",[s._v("4，不杰接受来自elk本机的日志。")])]),s._v(" "),a("p",[s._v("然后在两边都启动rsyslog服务。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl restart rsyslog\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rsyslog\nsystemctl status rsyslog\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("等待一会儿，就能够在elk主机上看到日志目录生成了。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@elk logstashfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pwd")]),s._v("\n/logs/logstashfile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@elk logstashfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".37.157\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后进去看一下日志，发现就是远程主机当中已经json化的nginx访问日志。")]),s._v(" "),a("h2",{attrs:{id:"_4-配置logstash。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置logstash。"}},[s._v("#")]),s._v(" 4，配置logstash。")]),s._v(" "),a("p",[s._v("接着就该考虑如何将远程转过来的nginx日志，呈现在elk集群当中，这里使用logstash进行日志的转发，配置如下：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("cat > /etc/logstash/conf.d/nginx.conf << EOF\ninput "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    file "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        type => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-access"')]),s._v("\n        path => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/logs/logstashfile/172.16.37.157/172.16.37.157_*.log"')]),s._v("\n        codec => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"json"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nfilter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    geoip "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        source => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xff"')]),s._v("\n        fields => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"city_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"country_code2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"country_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latitude"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"longitude"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"region_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        remove_field => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[geoip][latitude]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[geoip][longitude]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        source => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"message"')]),s._v("\n        target => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jsoncontent"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\noutput "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    if "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" == "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-access"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        elasticsearch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            hosts => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:9200"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            manage_template => "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n            index => "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-access-%{+YYYY-MM}"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nEOF\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("ul",[a("li",[s._v("1，input定义日志的名称（type），位置（path），格式。可以定义多个。这里直接读取通过rsyslog放置到本地的日志。")]),s._v(" "),a("li",[s._v("2，filter定义一些关键字段的过滤。通过geoip来实现ip的地理位置标识，注意这个地方我的source是xff，上边我已经解释过这个原因，如果你的是常规情况，那么应该更改成clientip。")]),s._v(" "),a("li",[s._v("3，output定义标准输出，到本机的9200端口，最后的index是索引名称，可以自定义，如果是不同主机上的日志，可以在这个地方根据其ip不同来进行区分。")])]),s._v(" "),a("p",[s._v("注意：此处所配置的"),a("a",{attrs:{href:"https://dev.maxmind.com/zh-hans/geoip/legacy/geolite/",target:"_blank",rel:"noopener noreferrer"}},[s._v("geoip"),a("OutboundLink")],1),s._v("不需要像网上许多教程说的，还要再引用对应的数据库，因为目前最新版本的elk已经配备了相应的配置，这点，在等会儿启动的日志当中可以见分晓。")]),s._v(" "),a("p",[s._v("然后再将这个实例起来，通过此实例将日志转给es。")]),s._v(" "),a("p",[s._v("启动时默认有一个data目录，为了方便以后多实例管理，所以单独创建一个，另外启动日志也可以输出一个，从而让运维更容易，同样也创建对应的目录。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/share/logstash/data1\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /logs/logstash_nohup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("启动实例。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" /usr/share/logstash/bin/logstash -f /etc/logstash/conf.d/nginx.conf --path.data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/logstash/data1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /logs/logstash_nohup/nginx.out "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后监听一下转发状况：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$tail")]),s._v(" -fn "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" /logs/logstash_nohup/nginx.out\nWARNING可以忽略，因为我们启动的时候已经指定配置文件了。: Could not "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" logstash.yml "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is typically located "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LS_HOME")]),s._v("/config or /etc/logstash. You can specify the path using --path.settings. Continuing using the defaults\nCould not "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" log4j2 configuration at path /usr/share/logstash/config/log4j2.properties. Using default config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" logs errors to the console\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:40.285 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("LogStash::Runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" multilocal - Ignoring the "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pipelines.yml'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" because modules or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" line options are specified\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:40.300 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("LogStash::Runner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" runner - Starting Logstash "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logstash.version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.5.3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:43.330 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Converge PipelineAction::Create"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" pipeline - Starting pipeline "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":pipeline_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pipeline.workers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pipeline.batch.size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("125")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pipeline.batch.delay"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:43.733 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - Elasticsearch pool URLs updated "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":changes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":removed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", :added"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("http://127.0.0.1:9200/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:45.024 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - Restored connection to ES instance "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://127.0.0.1:9200/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.660 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - ES Output version determined "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":es_version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.663 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - Detected a "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".x and above cluster: the "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" event field won't be used to determine the document _type "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":es_version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.687 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - New Elasticsearch output "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":class"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LogStash::Outputs::ElasticSearch"')]),s._v(", :hosts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//127.0.0.1:9200"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.701 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ruby-0-Thread-5: :1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - Using mapping template from "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("nil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.711 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-pipeline-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" geoip - Using geoip database "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/share/logstash/vendor/bundle/jruby/2.3.0/gems/logstash-filter-geoip-5.0.3-java/vendor/GeoLite2-City.mmdb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.723 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ruby-0-Thread-5: :1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" elasticsearch - Attempting to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" template "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":manage_template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logstash-*"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60001")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.refresh_interval"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_default_"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dynamic_templates"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"message_field"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path_match"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"message"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match_mapping_type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapping"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"norms"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string_fields"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match_mapping_type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapping"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"norms"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fields"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ignore_above"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geoip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dynamic"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo_point"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latitude"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"half_float"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"longitude"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"half_float"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:46.989 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("worker15"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" beats - Beats inputs: Starting input listener "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":address"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0:5054"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:47.006 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Converge PipelineAction::Create"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" pipeline - Pipeline started successfully "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":pipeline_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),s._v(", :thread"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#<Thread:0x31362ee1 run>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:47.058 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Ruby-0-Thread-1: /usr/share/logstash/lib/bootstrap/environment.rb:6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" agent - Pipelines running "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":count"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", :running_pipelines"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", :non_running_pipelines"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:47.061 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("beats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Server - Starting server on port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5054")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":49:47.290 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Api Webserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" agent - Successfully started Logstash API endpoint "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9610")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("说明：")]),s._v(" "),a("p",[s._v("从这段日志当中，可以看出不少的信息，所以特别的拎出来了。")]),s._v(" "),a("ul",[a("li",[s._v("1，第一个WARNING可以忽略，因为我们启动的时候已经指定配置文件了。")]),s._v(" "),a("li",[s._v("2，启动之后开始连接配置当中指定的127.0.0.1:9200。")]),s._v(" "),a("li",[s._v("3，接着会看到一个输出：")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("geoip - Using geoip database "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(":path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/share/logstash/vendor/bundle/jruby/2.3.0/gems/logstash-filter-geoip-5.0.3-java/vendor/GeoLite2-City.mmdb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这条输出的意思就是刚刚我提到的那个问题，系统其实已经有了对应的库，进行加载，当然，有可能这个库的新鲜度未必能够保证。需要注意的是，GeoLite数据库由每月的第一个星期二的MaxMind更新，如果需要最新的，可以及时进行更新下载。")]),s._v(" "),a("ul",[a("li",[s._v("4，接着可以看到es加载了初始定义好了的模板进行数据处理。")]),s._v(" "),a("li",[s._v("5，直到一系列初始化完成，然后正式处理对应的日志到。")])]),s._v(" "),a("p",[s._v("过一会儿，会看到有大量日志输出，说明日志已经成功转发给es，此时也可以去kibana当中创建一个对应的索引了。")]),s._v(" "),a("h2",{attrs:{id:"_5-简单使用kibana。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-简单使用kibana。"}},[s._v("#")]),s._v(" 5，简单使用kibana。")]),s._v(" "),a("p",[s._v("现在来访问kibana做一些简单查看：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1nrRHaNv1gK0jSZFF7620sXXaZ.png",alt:"img"}})]),s._v(" "),a("ul",[a("li",[s._v("1，点击管理，进入到管理界面。")]),s._v(" "),a("li",[s._v("2，点击索引管理，可以看到es已经创建的索引。")]),s._v(" "),a("li",[s._v("3，点击索引模式，将es的索引引入到kibana当中。")])]),s._v(" "),a("p",[s._v("现在我们点击第三步，去创建一下索引：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1osNIaND1gK0jSZFK763JrVXaz.png",alt:"img"}})]),s._v(" "),a("p",[s._v("点击进来之后，就能看到刚刚我们定义的索引了，现在我创建一个以"),a("code",[s._v("nginx-access*")]),s._v("命名的索引（这个地方所列出来的索引，都是在logstash的配置当中定义了的索引），点击下一步。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1DLFHaQT2gK0jSZPc763KkpXaj.png",alt:"img"}})]),s._v(" "),a("p",[s._v("选择索引的模式，这里一般都使用"),a("code",[s._v("timestamp")]),s._v("，即以时间作为标准。然后点击创建即可。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB140JEaFY7gK0jSZKz761ikpXaH.png",alt:"img"}})]),s._v(" "),a("p",[s._v("创建成功之后，能够看到一些我们前边定义好了的字段，这些字段也将成为我们日后分析日志的重要依据，可能你现在对字段是什么，还不能十分理解，不用着急，慢慢往后看，咱们一起边做边理解。")]),s._v(" "),a("p",[s._v("现在可以去看一下，前台日志展示页面是否成功了：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1xkK9X1bviK0jSZFN761ApXXaE.png",alt:"img"}})]),s._v(" "),a("p",[s._v("可以看到日志已经呈现在眼前了，到这里，可以说，基本上elk的整个流程就算是走通了。")]),s._v(" "),a("p",[s._v("貌似一般情况下，网上教程都是到这个地方就结束了，然而，事情难道不是刚刚开始么。")]),s._v(" "),a("p",[s._v("接着，我们先来看一下我们前边多次提到的字段是否如我们所愿的展示了，查看的方法也很简单，随便点击其中一条日志，查看其json的格式：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ae01.alicdn.com/kf/HTB1DHXIaQL0gK0jSZFx760WHVXas.png",alt:"img"}})]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_index"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-access-2018-12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"USJ_wWcBSQAerHbVQR9q"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_score"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"xff"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"183.214.48.249"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request_method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.37.157"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"agent"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"upstreamtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.004"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-12-18T13:26:40.000Z"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"referer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://h5.51fanbei.com/h5/activity/201806/wxIndexHelp.html?inviteUser=NpCYtbHZVkqufRMsZvVqNg==&freeOrder=WHaDtQnCpE9BSOnAB9LVxQ=="')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"upstreamhost"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.37.158:8080"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clientip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.37.161"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"responsetime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.005")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/fanbei-web/activity/freeOrder/showHelpGoods"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"200"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-access"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/logs/logstashfile/172.16.37.157/172.16.37.157_2018-12-18.log"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"geoip"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"country_code2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"city_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Changsha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"region_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hunan"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"country_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"China"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"http_host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.51fanbei.com"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"fields"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-12-18T13:26:40.000Z"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sort"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1545139600000")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br")])]),a("p",[s._v("这样一展示之后，就能看出，清晰多了，我们所想要的，都生成了，稍候就能够通过这些数据，来进行画图等操作。")])])}),[],!1,null,null,null);t.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{659:function(s,a,t){"use strict";t.r(a);var e=t(11),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("有一个场景，有一个域名解析到了很多机器，在扩容的时候，会新增解到新的机器上，但是在前端真正放量之前，我们需要对这些新增的做一下验证，此时就要用到域名与IP的对应关系来进行验证。")]),s._v(" "),t("p",[s._v("一个方案是通过绑定hosts来指定，不过还可以直接使用curl加参数的方式来做。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("方法一，好用")]),s._v(" "),t("p",[t("code",[s._v("curl url -x ip:port")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" abc.com -x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".7.7:80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此时请求abc.com会转到对应主机的对应端口。")])]),s._v(" "),t("li",[t("p",[s._v("方法二")]),s._v(" "),t("p",[t("code",[s._v("curl -H 'Host:baidu.com' http://10.12.20.21")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HOST:abc.com"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".7.7\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://t.eryajf.net/imgs/2021/09/4faafe7b3e7ca49b.jpg",alt:"7c500d5870a50a28add243c469fb2aad"}})]),s._v(" "),t("p",[s._v("如上两种方式都只能测试http协议的请求，如果想要测试HTTPS的请求，则可以用如下方式：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("方法三")]),s._v(" "),t("p",[t("code",[s._v("curl --resolve host:port:address")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTP")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://abc.com/ --resolve abc.com:80:10.3.7.7\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTPS")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://abc.com/ --resolve abc.com:443:10.3.7.7\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);